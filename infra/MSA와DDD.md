**DDD(Domain-Driven Development)란?**

- “훌륭한 소프트웨어를 개발하고 싶다면 서비스 도메인에 귀를 기울여라.”라는 슬로건으로 부터 시작.
- 오늘날 가장 보편화된 시스템 아키텍처인 MSA(Micro Service Architecture)를 구현하는 필수 개념들의 근간이 되었다.
- **DDD의 핵심 요소**

  MSA 설계 원칙이기도 하다.

    - 도메인들 간의 Loose Coupling(느슨한 결합)
    - 도메인 내에서의 High Cohesion(높은 응집)
    - 도메인: 개발하고자 하는 전체 서비스를 자라낸 단위

도메인을 잘못 나누면 MSA 입장에서 많은 혼란이 가중된다.

도메인을 Loose coupling과 high cohesion 관점에서 잘 나누는 것이 DDD와 MSA에서 가장 중요.

(도메인간에는 느슨하게 결합되어 있으면서 도메인 내부는 강하게 결합되어야 한다)

![Untitled](https://helloworld.kurly.com/post-img/ddd-msa-service-development/domains.svg)

### MSA(Micro Service Architecture)

DDD를 기반으로 정의한 아키텍처 패턴

- DDD 설계 원칙(낮은 결합도와 높은 응집도)을 MSA에 적용
- 도메인 내 마이크로서비스와 도메인 외부 마이크로서비스로 구분된다.
- 내부 인터페이스인지 외부 인터페이스인지에 따라 마이크로 서비스들 간의 커뮤니케이션 방식, 즉 설계 원칙이 달라진다.
    - 도메인 A 내 마이크로서비스들은 API 기반의 `Sync Call` 이나 같은 DB를 바라 볼 수 있다.
    - **도메인 A**에 있는 마이크로서비스가 **도메인 B**의 마이크로서비스들과 소통하기 위해서는 `Async` 방식의 메시지 기반 통신을 수행하고 DB도 분리되어야 한다.

### MSA 설계 원칙 및 장점

MSA의 핵심 이점 3가지를 낮은 결합도와 높은 응집도 원칙으로 해석하여 정리하면 다음과 같다.

- **Strong Module Boundaries (명확한 모듈 경계)**
    - MSA를 통해서 모듈간의 경계를 명확하게 구분 할 수 있다.
        - 시스템 변경 사항이 생겼을때 특정 도메인 내 마이크로서비스 단위만 변경하면 된다.
    - 제대로 경계를 가지지 못할 경우, 마이크로서비스로의 분리는 오히려 단점이 될 수 있다.
- **Independent Deployment (독립적 배포)**
    - 낮은 결합도, 높은 응집도와 같은 의존성 관계를 고려하여 시스템을 설계하기 때문에 **각각의 마이크로서비스를 독립적으로 배포하는 것을 용이하게 한다.**
    - CI/CD가 강화될 수 있던건 MSA가 배포 단위까지 고려한 설계이기 때문.
- **Technology Diversity (기술 다양성)**
    - 마이크로서비스간의 독립성이 강화되면서 마이크로서비스 내의 기술 선택이 자유로워졌다.
        - 도메인 내 마이크로서비스들은 `높은 응집도` 원칙에 따라 최대한 유사 기술 스택을 가져야 한다.
        - 도메인 밖의 마이크로서비스들은 `낮은 결합도` 원칙에 따라 문제 해결에 적합한 다른 기술 스택을 가져갈 수 있다.

  단, 너무 다양한 기술 도입은 복잡성과 비효율을 초래할 수 있다.

  조직 성숙도와 다른 서비스 도메인 간의 연동 인터페이스 설계 원칙을 보다 면밀히 검토해야 한다.


---

**참고 자료 📚**
- [DDD와 MSA 기반으로 좋은 서비스 개발하기](https://helloworld.kurly.com/blog/ddd-msa-service-development/)
